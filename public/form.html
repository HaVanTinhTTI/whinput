
<script>
  const supabaseUrl = 'https://chjqassbtcqthueeddou.supabase.co';
  const supabaseKey = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImNoanFhc3NidGNxdGh1ZWVkZG91Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjAxMzY2OTgsImV4cCI6MjA3NTcxMjY5OH0.FbWGSw9sqUkb2_ppErN4QTFGy1Cho-HX4XbR5_-KB0I';
  const supabase = supabase.createClient(supabaseUrl, supabaseKey);

  const form = document.getElementById('dataForm');
  form.addEventListener('submit', async (e) => {
    e.preventDefault();
    const formData = new FormData(form);
    const data = Object.fromEntries(formData.entries());
    data.Rut_mau = formData.get('Rut_mau') === 'on';
    data.Seq = parseInt(data.Seq);
    data.Quantity = parseInt(data.Quantity);
    data.Total_Pallet = parseInt(data.Total_Pallet);

    console.log("Dữ liệu gửi:", data); // ✅ In ra dữ liệu gửi

    const { data: result, error } = await supabase.from('input_data').insert([data]);

    if (error) {
      console.error("Lỗi Supabase:", error); // ✅ In lỗi chi tiết
      alert('Lỗi: ' + error.message);
    } else {
      console.log("Kết quả Supabase:", result); // ✅ In kết quả trả về
      alert('Gửi dữ liệu thành công!');
      form.reset();
    }
  });
</script>
